(("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]=("undefined"!=typeof globalThis?globalThis:self)["makoChunk_ant-design-pro"]||[]).push([["087761f9"],{"087761f9":function(e,a,t){t.d(a,"__esModule",{value:!0}),t.e(a,{default:function(){return y;}});var n=t("852bbaa9"),l=t("f1317d59"),d=t("c4f784d0"),s=t("38652919"),r=t("7f218433"),o=t("864c62b1"),i=n._(o),u=t("9ee30b17");async function c(){return(0,u.request)("/api/v1/system/data/tables",{method:"GET"});}async function m(e){return(0,u.request)(`/api/v1/system/data/tables/${e}/columns`,{method:"GET"});}async function _(e,a){return(0,u.request)(`/api/v1/system/data/tables/${e}/rows`,{method:"GET",params:a});}let y=()=>{let[e,a]=(0,i.useState)(),[t,n]=(0,i.useState)([]);return(0,l.jsx)(d.PageContainer,{children:(0,l.jsxs)(s.ProCard,{split:"vertical",bordered:!0,children:[(0,l.jsx)(s.ProCard,{title:"\u6570\u636E\u8868",colSpan:"40%",children:(0,l.jsx)(r.ProTable,{rowKey:"table_name",search:!1,pagination:!1,toolBarRender:!1,request:async()=>{let t=await c();return 200===t.code&&t.data?(!e&&t.data.length>0&&a(t.data[0].table_name),{data:t.data,success:!0}):{data:[],success:!1};},columns:[{title:"\u8868\u540D",dataIndex:"table_name",key:"table_name"},{title:"\u7C7B\u578B",dataIndex:"table_type",key:"table_type"}],onRow:e=>({onClick:()=>{a(e.table_name);}})})}),(0,l.jsxs)(s.ProCard,{title:e?`\u{8868}\u{4FE1}\u{606F}\u{FF08}${e}\u{FF09}`:"\u8868\u4FE1\u606F",split:"horizontal",children:[(0,l.jsx)(s.ProCard,{title:"\u5B57\u6BB5",children:(0,l.jsx)(r.ProTable,{rowKey:"column_name",search:!1,pagination:!1,toolBarRender:!1,request:async()=>{if(!e)return n([]),{data:[],success:!0};let a=await m(e);return 200===a.code&&a.data?(n(a.data),{data:a.data,success:!0}):(n([]),{data:[],success:!1});},columns:[{title:"\u5B57\u6BB5\u540D",dataIndex:"column_name",key:"column_name"},{title:"\u6570\u636E\u7C7B\u578B",dataIndex:"data_type",key:"data_type"},{title:"\u53EF\u4E3A\u7A7A",dataIndex:"is_nullable",key:"is_nullable",render:e=>e?"\u662F":"\u5426"},{title:"\u6700\u5927\u957F\u5EA6",dataIndex:"max_length",key:"max_length",render:e=>null!=e?e:"-"},{title:"\u9ED8\u8BA4\u503C",dataIndex:"column_default",key:"column_default",ellipsis:!0,render:e=>e||"-"}]})}),(0,l.jsx)(s.ProCard,{title:"\u6570\u636E",children:(0,l.jsx)(r.ProTable,{rowKey:"_row_key",search:!1,pagination:{defaultPageSize:10},toolBarRender:!1,request:async a=>{if(!e)return{data:[],success:!0,total:0};let t=await _(e,{page:a.current||1,page_size:a.pageSize||10});return 200===t.code&&t.data?{data:(t.data.items||[]).map((e,a)=>({_row_key:void 0!==e.id&&null!==e.id?String(e.id):`${t.data.page}-${a}`,...e})),success:!0,total:t.data.total}:{data:[],success:!1,total:0};},columns:t.length>0?t.map(e=>({title:e.column_name,dataIndex:e.column_name,key:e.column_name,ellipsis:!0})):[{title:"\u65E0\u5B57\u6BB5\u4FE1\u606F",dataIndex:"_",render:()=>"-"}]})})]})]})});};}}]);
//# sourceMappingURL=087761f9-async.4845a29e.js.map