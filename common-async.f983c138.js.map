{"version":3,"sources":["src/services/shiyu-api/role.ts"],"sourcesContent":["import { request } from '@umijs/max';\r\n\r\nexport interface Role {\r\n  role_code: string;\r\n  role_name: string;\r\n  role_key: string;\r\n  data_scope: string;\r\n  status: number;\r\n}\r\n\r\nexport interface RoleListResponse {\r\n  items: Role[];\r\n  page: number;\r\n  size: number;\r\n  total: number;\r\n}\r\n\r\nexport interface CreateRoleRequest {\r\n  role_code: string;\r\n  role_name: string;\r\n  role_key: string;\r\n  data_scope?: string;\r\n  status?: number;\r\n}\r\n\r\nexport interface UpdateRoleRequest {\r\n  role_name?: string;\r\n  role_key?: string;\r\n  data_scope?: string;\r\n  status?: number;\r\n}\r\n\r\n/** 获取角色列表 */\r\nexport async function getRoleList(params: {\r\n  page?: number;\r\n  page_size?: number;\r\n}) {\r\n  return request<{\r\n    code: number;\r\n    data: RoleListResponse;\r\n    message?: string;\r\n  }>('/api/v1/system/roles', {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 获取角色详情 */\r\nexport async function getRole(roleCode: string) {\r\n  return request<{\r\n    code: number;\r\n    data: Role;\r\n    message?: string;\r\n  }>(`/api/v1/system/roles/${roleCode}`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 创建角色 */\r\nexport async function createRole(data: CreateRoleRequest) {\r\n  return request<{\r\n    code: number;\r\n    data: Role;\r\n    message?: string;\r\n  }>('/api/v1/system/roles', {\r\n    method: 'POST',\r\n    data,\r\n  });\r\n}\r\n\r\n/** 更新角色 */\r\nexport async function updateRole(roleCode: string, data: UpdateRoleRequest) {\r\n  return request<{\r\n    code: number;\r\n    data: Role;\r\n    message?: string;\r\n  }>(`/api/v1/system/roles/${roleCode}`, {\r\n    method: 'PUT',\r\n    data,\r\n  });\r\n}\r\n\r\n/** 删除角色 */\r\nexport async function deleteRole(roleCode: string) {\r\n  return request<{\r\n    code: number;\r\n    data: { deleted: boolean };\r\n    message?: string;\r\n  }>(`/api/v1/system/roles/${roleCode}`, {\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\n/** 获取角色菜单 */\r\nexport async function getRoleMenus(roleCode: string) {\r\n  return request<{\r\n    code: number;\r\n    data: any[];\r\n    message?: string;\r\n  }>(`/api/v1/system/roles/${roleCode}/menus`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 设置角色菜单 */\r\nexport async function setRoleMenus(roleCode: string, menuCodes: string[]) {\r\n  return request<{\r\n    code: number;\r\n    data: { updated: boolean };\r\n    message?: string;\r\n  }>(`/api/v1/system/roles/${roleCode}/menus`, {\r\n    method: 'PUT',\r\n    data: { menu_codes: menuCodes },\r\n  });\r\n}\r\n\r\n"],"names":[],"mappings":"gQA2DsB,UAAU,mBAAV,IAwBA,UAAU,mBAAV,IAlDA,WAAW,mBAAX,IA6DA,YAAY,mBAAZ,IAWA,YAAY,mBAAZ,IAlCA,UAAU,mBAAV,cAvEE,YAiCjB,eAAe,EAAY,CAGjC,EACC,MAAO,GAAA,SAAO,EAIX,uBAAwB,CACzB,OAAQ,MACR,OAAA,CACF,GACF,CAcO,eAAe,EAAW,CAAuB,EACtD,MAAO,GAAA,SAAO,EAIX,uBAAwB,CACzB,OAAQ,OACR,KAAA,CACF,GACF,CAGO,eAAe,EAAW,CAAgB,CAAE,CAAuB,EACxE,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,CAAC,CAAE,CACrC,OAAQ,MACR,KAAA,CACF,GACF,CAGO,eAAe,EAAW,CAAgB,EAC/C,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,CAAC,CAAE,CACrC,OAAQ,QACV,GACF,CAGO,eAAe,EAAa,CAAgB,EACjD,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,MAAM,CAAC,CAAE,CAC3C,OAAQ,KACV,GACF,CAGO,eAAe,EAAa,CAAgB,CAAE,CAAmB,EACtE,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,MAAM,CAAC,CAAE,CAC3C,OAAQ,MACR,KAAM,CAAE,WAAY,CAAU,CAChC,GACF"}