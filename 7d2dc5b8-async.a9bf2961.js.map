{"version":3,"sources":["src/services/shiyu-api/user.ts","src/pages/system/user/components/UserForm.tsx","src/pages/system/user/index.tsx"],"sourcesContent":["import { request } from '@umijs/max';\r\n\r\nexport interface User {\r\n  user_code: string;\r\n  username: string;\r\n  nickname: string;\r\n  email?: string;\r\n  phone?: string;\r\n  dept_code?: string;\r\n  status: number;\r\n}\r\n\r\nexport interface UserListResponse {\r\n  items: User[];\r\n  page: number;\r\n  size: number;\r\n  total: number;\r\n}\r\n\r\nexport interface CreateUserRequest {\r\n  user_code: string;\r\n  username: string;\r\n  password: string;\r\n  nickname?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  dept_code?: string;\r\n  status?: number;\r\n}\r\n\r\nexport interface UpdateUserRequest {\r\n  nickname?: string;\r\n  email?: string;\r\n  phone?: string;\r\n  dept_code?: string;\r\n  status?: number;\r\n  password?: string;\r\n}\r\n\r\n/** 获取用户列表 */\r\nexport async function getUserList(params: {\r\n  page?: number;\r\n  page_size?: number;\r\n}) {\r\n  return request<{\r\n    code: number;\r\n    data: UserListResponse;\r\n    message?: string;\r\n  }>('/api/v1/system/users', {\r\n    method: 'GET',\r\n    params,\r\n  });\r\n}\r\n\r\n/** 创建用户 */\r\nexport async function createUser(data: CreateUserRequest) {\r\n  return request<{\r\n    code: number;\r\n    data: User;\r\n    message?: string;\r\n  }>('/api/v1/system/users', {\r\n    method: 'POST',\r\n    data,\r\n  });\r\n}\r\n\r\n/** 更新用户 */\r\nexport async function updateUser(userCode: string, data: UpdateUserRequest) {\r\n  return request<{\r\n    code: number;\r\n    data: User;\r\n    message?: string;\r\n  }>(`/api/v1/system/users/${userCode}`, {\r\n    method: 'PUT',\r\n    data,\r\n  });\r\n}\r\n\r\n/** 删除用户 */\r\nexport async function deleteUser(userCode: string) {\r\n  return request<{\r\n    code: number;\r\n    data: { deleted: boolean };\r\n    message?: string;\r\n  }>(`/api/v1/system/users/${userCode}`, {\r\n    method: 'DELETE',\r\n  });\r\n}\r\n\r\n/** 获取用户角色 */\r\nexport async function getUserRoles(userCode: string) {\r\n  return request<{\r\n    code: number;\r\n    data: any[];\r\n    message?: string;\r\n  }>(`/api/v1/system/users/${userCode}/roles`, {\r\n    method: 'GET',\r\n  });\r\n}\r\n\r\n/** 设置用户角色 */\r\nexport async function setUserRoles(userCode: string, roleCodes: string[]) {\r\n  return request<{\r\n    code: number;\r\n    data: { updated: boolean };\r\n    message?: string;\r\n  }>(`/api/v1/system/users/${userCode}/roles`, {\r\n    method: 'PUT',\r\n    data: { role_codes: roleCodes },\r\n  });\r\n}\r\n\r\n","import { ProForm, ProFormText, ProFormSelect, ProFormDigit } from '@ant-design/pro-components';\r\nimport type { ProFormInstance } from '@ant-design/pro-components';\r\nimport { Button, Modal, message } from 'antd';\r\nimport React, { useEffect, useState, useRef } from 'react';\r\nimport type { CreateUserRequest, UpdateUserRequest, User } from '@/services/shiyu-api/user';\r\nimport { getUserRoles, setUserRoles } from '@/services/shiyu-api/user';\r\nimport { getRoleList, type Role } from '@/services/shiyu-api/role';\r\n\r\ninterface UserFormProps {\r\n  visible: boolean;\r\n  onCancel: () => void;\r\n  onSubmit: (values: CreateUserRequest | UpdateUserRequest) => Promise<void>;\r\n  title: string;\r\n  initialValues?: User;\r\n}\r\n\r\nconst UserForm: React.FC<UserFormProps> = ({\r\n  visible,\r\n  onCancel,\r\n  onSubmit,\r\n  title,\r\n  initialValues,\r\n}) => {\r\n  const isEdit = !!initialValues;\r\n  const [roleOptions, setRoleOptions] = useState<{ label: string; value: string }[]>([]);\r\n  const [selectedRoles, setSelectedRoles] = useState<string[]>([]);\r\n  const formRef = useRef<ProFormInstance>(null);\r\n\r\n  // 加载角色列表\r\n  useEffect(() => {\r\n    if (visible) {\r\n      loadRoles();\r\n      if (isEdit && initialValues?.user_code) {\r\n        loadUserRoles(initialValues.user_code);\r\n      } else {\r\n        setSelectedRoles([]);\r\n        formRef.current?.setFieldsValue({ role_codes: [] });\r\n      }\r\n    }\r\n  }, [visible, isEdit, initialValues?.user_code]);\r\n\r\n  const loadRoles = async () => {\r\n    try {\r\n      const res = await getRoleList({ page: 1, page_size: 1000 });\r\n      if (res.code === 200 && res.data) {\r\n        const options = res.data.items.map((role: Role) => ({\r\n          label: role.role_name,\r\n          value: role.role_code,\r\n        }));\r\n        setRoleOptions(options);\r\n      }\r\n    } catch (error) {\r\n      console.error('加载角色列表失败:', error);\r\n    }\r\n  };\r\n\r\n  const loadUserRoles = async (userCode: string) => {\r\n    try {\r\n      const res = await getUserRoles(userCode);\r\n      if (res.code === 200 && res.data) {\r\n        const roleCodes = res.data.map((role: Role) => role.role_code);\r\n        setSelectedRoles(roleCodes);\r\n        formRef.current?.setFieldsValue({ role_codes: roleCodes });\r\n      }\r\n    } catch (error) {\r\n      console.error('加载用户角色失败:', error);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <Modal\r\n      title={title}\r\n      open={visible}\r\n      onCancel={onCancel}\r\n      footer={null}\r\n      width={600}\r\n    >\r\n      <ProForm\r\n        formRef={formRef}\r\n        initialValues={initialValues}\r\n        onFinish={async (values) => {\r\n          try {\r\n            // 先提交用户信息\r\n            await onSubmit(values as CreateUserRequest | UpdateUserRequest);\r\n            \r\n            // 获取用户编码（新建时从表单值获取，编辑时从 initialValues 获取）\r\n            const userCode = isEdit \r\n              ? initialValues?.user_code \r\n              : (values as CreateUserRequest).user_code;\r\n            \r\n            // 设置用户角色\r\n            if (userCode && selectedRoles.length >= 0) {\r\n              try {\r\n                const res = await setUserRoles(userCode, selectedRoles);\r\n                if (res.code === 200) {\r\n                  if (selectedRoles.length > 0) {\r\n                    message.success('角色分配成功');\r\n                  }\r\n                }\r\n              } catch (error) {\r\n                message.warning('用户信息已保存，但角色分配失败');\r\n              }\r\n            }\r\n          } catch (error) {\r\n            // 错误已在 onSubmit 中处理\r\n          }\r\n        }}\r\n        submitter={{\r\n          render: (props, doms) => {\r\n            return [\r\n              <Button key=\"cancel\" onClick={onCancel}>\r\n                取消\r\n              </Button>,\r\n              <Button key=\"submit\" type=\"primary\" onClick={() => props.form?.submit?.()}>\r\n                确定\r\n              </Button>,\r\n            ];\r\n          },\r\n        }}\r\n      >\r\n        {!isEdit && (\r\n          <>\r\n            <ProFormText\r\n              name=\"user_code\"\r\n              label=\"用户编码\"\r\n              rules={[{ required: true, message: '请输入用户编码' }]}\r\n            />\r\n            <ProFormText\r\n              name=\"username\"\r\n              label=\"用户名\"\r\n              rules={[{ required: true, message: '请输入用户名' }]}\r\n            />\r\n            <ProFormText.Password\r\n              name=\"password\"\r\n              label=\"密码\"\r\n              rules={[{ required: true, message: '请输入密码' }]}\r\n            />\r\n          </>\r\n        )}\r\n        <ProFormText name=\"nickname\" label=\"昵称\" />\r\n        <ProFormText name=\"email\" label=\"邮箱\" />\r\n        <ProFormText name=\"phone\" label=\"手机号\" />\r\n        <ProFormText name=\"dept_code\" label=\"部门编码\" />\r\n        <ProFormSelect\r\n          name=\"status\"\r\n          label=\"状态\"\r\n          options={[\r\n            { label: '启用', value: 1 },\r\n            { label: '禁用', value: 0 },\r\n          ]}\r\n        />\r\n        {isEdit && (\r\n          <ProFormText.Password\r\n            name=\"password\"\r\n            label=\"新密码（留空不修改）\"\r\n          />\r\n        )}\r\n        <ProFormSelect\r\n          name=\"role_codes\"\r\n          label=\"角色\"\r\n          mode=\"multiple\"\r\n          options={roleOptions}\r\n          fieldProps={{\r\n            value: selectedRoles,\r\n            onChange: (value) => {\r\n              setSelectedRoles(value as string[]);\r\n              formRef.current?.setFieldsValue({ role_codes: value });\r\n            },\r\n          }}\r\n          placeholder=\"请选择角色\"\r\n        />\r\n      </ProForm>\r\n    </Modal>\r\n  );\r\n};\r\n\r\nexport default UserForm;\r\n\r\n","import { PlusOutlined } from '@ant-design/icons';\r\nimport type { ActionType, ProColumns } from '@ant-design/pro-components';\r\nimport { PageContainer, ProTable } from '@ant-design/pro-components';\r\nimport { Button, message, Modal } from 'antd';\r\nimport React, { useRef, useState } from 'react';\r\nimport {\r\n  createUser,\r\n  deleteUser,\r\n  getUserList,\r\n  updateUser,\r\n  type CreateUserRequest,\r\n  type UpdateUserRequest,\r\n  type User,\r\n} from '@/services/shiyu-api/user';\r\nimport UserForm from './components/UserForm';\r\n\r\nconst UserManagement: React.FC = () => {\r\n  const [createModalVisible, setCreateModalVisible] = useState(false);\r\n  const [updateModalVisible, setUpdateModalVisible] = useState(false);\r\n  const [editingRecord, setEditingRecord] = useState<User | null>(null);\r\n  const actionRef = useRef<ActionType>();\r\n\r\n  const handleCreate = async (values: CreateUserRequest): Promise<void> => {\r\n    try {\r\n      const res = await createUser(values);\r\n      if (res.code === 200) {\r\n        message.success('创建成功');\r\n        setCreateModalVisible(false);\r\n        actionRef.current?.reload();\r\n      } else {\r\n        message.error(res.message || '创建失败');\r\n        throw new Error(res.message || '创建失败');\r\n      }\r\n    } catch (error) {\r\n      message.error('创建失败');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleUpdate = async (values: UpdateUserRequest): Promise<void> => {\r\n    if (!editingRecord) return;\r\n    try {\r\n      const res = await updateUser(editingRecord.user_code, values);\r\n      if (res.code === 200) {\r\n        message.success('更新成功');\r\n        setUpdateModalVisible(false);\r\n        setEditingRecord(null);\r\n        actionRef.current?.reload();\r\n      } else {\r\n        message.error(res.message || '更新失败');\r\n        throw new Error(res.message || '更新失败');\r\n      }\r\n    } catch (error) {\r\n      message.error('更新失败');\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const handleDelete = (record: User) => {\r\n    Modal.confirm({\r\n      title: '确认删除',\r\n      content: `确定要删除用户 \"${record.username}\" 吗？`,\r\n      onOk: async () => {\r\n        try {\r\n          const res = await deleteUser(record.user_code);\r\n          if (res.code === 200) {\r\n            message.success('删除成功');\r\n            actionRef.current?.reload();\r\n          } else {\r\n            message.error(res.message || '删除失败');\r\n          }\r\n        } catch (error) {\r\n          message.error('删除失败');\r\n        }\r\n      },\r\n    });\r\n  };\r\n\r\n  const columns: ProColumns<User>[] = [\r\n    {\r\n      title: '用户编码',\r\n      dataIndex: 'user_code',\r\n      key: 'user_code',\r\n      width: 120,\r\n    },\r\n    {\r\n      title: '用户名',\r\n      dataIndex: 'username',\r\n      key: 'username',\r\n      width: 120,\r\n    },\r\n    {\r\n      title: '昵称',\r\n      dataIndex: 'nickname',\r\n      key: 'nickname',\r\n      width: 120,\r\n    },\r\n    {\r\n      title: '邮箱',\r\n      dataIndex: 'email',\r\n      key: 'email',\r\n      width: 180,\r\n    },\r\n    {\r\n      title: '手机号',\r\n      dataIndex: 'phone',\r\n      key: 'phone',\r\n      width: 120,\r\n    },\r\n    {\r\n      title: '部门编码',\r\n      dataIndex: 'dept_code',\r\n      key: 'dept_code',\r\n      width: 120,\r\n    },\r\n    {\r\n      title: '状态',\r\n      dataIndex: 'status',\r\n      key: 'status',\r\n      width: 80,\r\n      valueEnum: {\r\n        1: { text: '启用', status: 'Success' },\r\n        0: { text: '禁用', status: 'Error' },\r\n      },\r\n    },\r\n    {\r\n      title: '操作',\r\n      key: 'action',\r\n      width: 180,\r\n      fixed: 'right',\r\n      render: (_, record) => [\r\n        <Button\r\n          key=\"edit\"\r\n          type=\"link\"\r\n          size=\"small\"\r\n          onClick={() => {\r\n            setEditingRecord(record);\r\n            setUpdateModalVisible(true);\r\n          }}\r\n        >\r\n          编辑\r\n        </Button>,\r\n        <Button\r\n          key=\"delete\"\r\n          type=\"link\"\r\n          size=\"small\"\r\n          danger\r\n          onClick={() => handleDelete(record)}\r\n        >\r\n          删除\r\n        </Button>,\r\n      ],\r\n    },\r\n  ];\r\n\r\n  return (\r\n    <PageContainer>\r\n      <ProTable<User>\r\n        headerTitle=\"用户管理\"\r\n        actionRef={actionRef}\r\n        rowKey=\"user_code\"\r\n        search={{\r\n          labelWidth: 'auto',\r\n        }}\r\n        toolBarRender={() => [\r\n          <Button\r\n            type=\"primary\"\r\n            key=\"primary\"\r\n            onClick={() => {\r\n              setCreateModalVisible(true);\r\n            }}\r\n          >\r\n            <PlusOutlined /> 新建\r\n          </Button>,\r\n        ]}\r\n        request={async (params) => {\r\n          const res = await getUserList({\r\n            page: params.current || 1,\r\n            page_size: params.pageSize || 10,\r\n          });\r\n          if (res.code === 200 && res.data) {\r\n            return {\r\n              data: res.data.items,\r\n              success: true,\r\n              total: res.data.total,\r\n            };\r\n          }\r\n          return {\r\n            data: [],\r\n            success: false,\r\n            total: 0,\r\n          };\r\n        }}\r\n        columns={columns}\r\n      />\r\n\r\n      <UserForm\r\n        visible={createModalVisible}\r\n        onCancel={() => setCreateModalVisible(false)}\r\n        onSubmit={handleCreate}\r\n        title=\"新建用户\"\r\n      />\r\n\r\n      {editingRecord && (\r\n        <UserForm\r\n          visible={updateModalVisible}\r\n          onCancel={() => {\r\n            setUpdateModalVisible(false);\r\n            setEditingRecord(null);\r\n          }}\r\n          onSubmit={handleUpdate}\r\n          title=\"编辑用户\"\r\n          initialValues={editingRecord}\r\n        />\r\n      )}\r\n    </PageContainer>\r\n  );\r\n};\r\n\r\nexport default UserManagement;\r\n\r\n"],"names":[],"mappings":"ofAwCO,eAAe,EAAY,CAGjC,EACC,MAAO,GAAA,SAAO,EAIX,uBAAwB,CACzB,OAAQ,MACR,OAAA,CACF,GACF,CAGO,eAAe,EAAW,CAAuB,EACtD,MAAO,GAAA,SAAO,EAIX,uBAAwB,CACzB,OAAQ,OACR,KAAA,CACF,GACF,CAGO,eAAe,EAAW,CAAgB,CAAE,CAAuB,EACxE,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,CAAC,CAAE,CACrC,OAAQ,MACR,KAAA,CACF,GACF,CAGO,eAAe,EAAW,CAAgB,EAC/C,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,CAAC,CAAE,CACrC,OAAQ,QACV,GACF,CAGO,eAAe,EAAa,CAAgB,EACjD,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,MAAM,CAAC,CAAE,CAC3C,OAAQ,KACV,GACF,CAGO,eAAe,EAAa,CAAgB,CAAE,CAAmB,EACtE,MAAO,GAAA,SAAO,EAIX,CAAC,qBAAqB,EAAE,EAAS,MAAM,CAAC,CAAE,CAC3C,OAAQ,MACR,KAAM,CAAE,WAAY,CAAU,CAChC,GACF,uFC9FA,IAAM,EAAoC,CAAC,CACzC,QAAA,CAAO,CACP,SAAA,CAAQ,CACR,SAAA,CAAQ,CACR,MAAA,CAAK,CACL,cAAA,CAAa,CACd,IACC,IAAM,EAAS,CAAC,CAAC,EACX,CAAC,EAAa,EAAe,CAAG,GAAA,UAAQ,EAAqC,EAAE,EAC/E,CAAC,EAAe,EAAiB,CAAG,GAAA,UAAQ,EAAW,EAAE,EACzD,EAAU,GAAA,QAAM,EAAkB,MAGxC,GAAA,WAAS,EAAC,KACR,GAAI,GAEF,GADA,IACI,UAAU,SAAA,EAAe,SAAS,EACpC,EAAc,EAAc,SAAS,MAChC,KAEL,EADA,EAAiB,EAAE,UACnB,EAAA,EAAQ,OAAO,YAAf,GAAA,EAAiB,cAAc,CAAC,CAAE,WAAY,EAAE,AAAC,GACnD,EAEJ,EAAG,CAAC,EAAS,QAAQ,SAAA,EAAe,SAAS,CAAC,EAE9C,IAAM,EAAY,UAChB,GAAI,CACF,IAAM,EAAM,MAAM,GAAA,aAAW,EAAC,CAAE,KAAM,EAAG,UAAW,GAAK,GACzD,GAAI,AAAa,MAAb,EAAI,IAAI,EAAY,EAAI,IAAI,CAAE,CAChC,IAAM,EAAU,EAAI,IAAI,CAAC,KAAK,CAAC,GAAG,CAAC,AAAC,GAAgB,CAAA,CAClD,MAAO,EAAK,SAAS,CACrB,MAAO,EAAK,SAAS,AACvB,CAAA,GACA,EAAe,GACjB,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,oDAAa,GAC7B,CACF,EAEM,EAAgB,MAAO,IAC3B,GAAI,CACF,IAAM,EAAM,MAAM,EAAa,GAC/B,GAAI,AAAa,MAAb,EAAI,IAAI,EAAY,EAAI,IAAI,CAAE,KAGhC,EAFA,IAAM,EAAY,EAAI,IAAI,CAAC,GAAG,CAAC,AAAC,GAAe,EAAK,SAAS,EAC7D,EAAiB,WACjB,EAAA,EAAQ,OAAO,YAAf,GAAA,EAAiB,cAAc,CAAC,CAAE,WAAY,CAAU,GAC1D,CACF,CAAE,MAAO,EAAO,CACd,QAAQ,KAAK,CAAC,oDAAa,GAC7B,CACF,EAEA,MACE,UAAC,SAAK,EACJ,MAAO,EACP,KAAM,EACN,SAAU,EACV,OAAQ,KACR,MAAO,aAEP,WAAC,SAAO,EACN,QAAS,EACT,cAAe,EACf,SAAU,MAAO,IACf,GAAI,CAEF,MAAM,EAAS,GAGf,IAAM,EAAW,QACb,SAAA,EAAe,SAAS,CACxB,AAAC,EAA6B,SAAS,CAG3C,GAAI,GAAY,EAAc,MAAM,EAAI,EACtC,GAAI,CACF,IAAM,EAAM,MAAM,EAAa,EAAU,GACxB,MAAb,EAAI,IAAI,EACN,EAAc,MAAM,CAAG,GACzB,SAAO,CAAC,OAAO,CAAC,wCAGtB,CAAE,MAAO,EAAO,CACd,SAAO,CAAC,OAAO,CAAC,8FAClB,CAEJ,CAAE,MAAO,EAAO,CAEhB,CACF,EACA,UAAW,CACT,OAAQ,CAAC,EAAO,IACP,CACL,UAAC,SAAM,EAAc,QAAS,WAAU,gBAA5B,UAGZ,UAAC,SAAM,EAAc,KAAK,UAAU,QAAS,SAAM,EAAA,iBAAA,EAAA,EAAM,IAAI,YAAV,iBAAA,EAAA,EAAY,MAAM,YAAlB,SAAA,OAAA,cAAwB,gBAA/D,UAGb,AAEL,YAEC,CAAC,GACA,iCACE,UAAC,SAAW,EACV,KAAK,YACL,MAAM,2BACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,4CAAU,EAAE,GAEjD,UAAC,SAAW,EACV,KAAK,WACL,MAAM,qBACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,sCAAS,EAAE,GAEhD,UAAC,SAAW,CAAC,QAAQ,EACnB,KAAK,WACL,MAAM,eACN,MAAO,CAAC,CAAE,SAAU,CAAA,EAAM,QAAS,gCAAQ,EAAE,MAInD,UAAC,SAAW,EAAC,KAAK,WAAW,MAAM,iBACnC,UAAC,SAAW,EAAC,KAAK,QAAQ,MAAM,iBAChC,UAAC,SAAW,EAAC,KAAK,QAAQ,MAAM,uBAChC,UAAC,SAAW,EAAC,KAAK,YAAY,MAAM,6BACpC,UAAC,SAAa,EACZ,KAAK,SACL,MAAM,eACN,QAAS,CACP,CAAE,MAAO,eAAM,MAAO,CAAE,EACxB,CAAE,MAAO,eAAM,MAAO,CAAE,EACzB,GAEF,GACC,UAAC,SAAW,CAAC,QAAQ,EACnB,KAAK,WACL,MAAM,iEAGV,UAAC,SAAa,EACZ,KAAK,aACL,MAAM,eACN,KAAK,WACL,QAAS,EACT,WAAY,CACV,MAAO,EACP,SAAU,AAAC,QAET,EADA,EAAiB,WACjB,EAAA,EAAQ,OAAO,YAAf,GAAA,EAAiB,cAAc,CAAC,CAAE,WAAY,CAAM,GACtD,CACF,EACA,YAAY,wCAKtB,EC9JM,EAA2B,KAC/B,GAAM,CAAC,EAAoB,EAAsB,CAAG,GAAA,UAAQ,EAAC,CAAA,GACvD,CAAC,EAAoB,EAAsB,CAAG,GAAA,UAAQ,EAAC,CAAA,GACvD,CAAC,EAAe,EAAiB,CAAG,GAAA,UAAQ,EAAc,MAC1D,EAAY,GAAA,QAAM,IAElB,EAAe,MAAO,IAC1B,GAAI,CACF,IAAM,EAAM,MAAM,EAAW,GAC7B,GAAI,AAAa,MAAb,EAAI,IAAI,CAAU,KAGpB,EAFA,SAAO,CAAC,OAAO,CAAC,4BAChB,EAAsB,CAAA,WACtB,EAAA,EAAU,OAAO,YAAjB,GAAA,EAAmB,MAAM,GAC3B,MAEE,MADA,SAAO,CAAC,KAAK,CAAC,EAAI,OAAO,EAAI,4BACvB,AAAI,MAAM,EAAI,OAAO,EAAI,4BAEnC,CAAE,MAAO,EAAO,CAEd,MADA,SAAO,CAAC,KAAK,CAAC,4BACR,EACR,CACF,EAEM,EAAe,MAAO,IAC1B,GAAK,EACL,GAAI,CACF,IAAM,EAAM,MAAM,EAAW,EAAc,SAAS,CAAE,GACtD,GAAI,AAAa,MAAb,EAAI,IAAI,CAAU,KAIpB,EAHA,SAAO,CAAC,OAAO,CAAC,4BAChB,EAAsB,CAAA,GACtB,EAAiB,cACjB,EAAA,EAAU,OAAO,YAAjB,GAAA,EAAmB,MAAM,GAC3B,MAEE,MADA,SAAO,CAAC,KAAK,CAAC,EAAI,OAAO,EAAI,4BACvB,AAAI,MAAM,EAAI,OAAO,EAAI,4BAEnC,CAAE,MAAO,EAAO,CAEd,MADA,SAAO,CAAC,KAAK,CAAC,4BACR,EACR,CACF,EAEM,EAAe,AAAC,IACpB,SAAK,CAAC,OAAO,CAAC,CACZ,MAAO,2BACP,QAAS,CAAC,0DAAS,EAAE,EAAO,QAAQ,CAAC,kBAAI,CAAC,CAC1C,KAAM,UACJ,GAAI,CACF,IAAM,EAAM,MAAM,EAAW,EAAO,SAAS,EAC7C,GAAI,AAAa,MAAb,EAAI,IAAI,CAAU,KAEpB,EADA,SAAO,CAAC,OAAO,CAAC,oCAChB,EAAA,EAAU,OAAO,YAAjB,GAAA,EAAmB,MAAM,GAC3B,MACE,SAAO,CAAC,KAAK,CAAC,EAAI,OAAO,EAAI,4BAEjC,CAAE,MAAO,EAAO,CACd,SAAO,CAAC,KAAK,CAAC,4BAChB,CACF,CACF,GACF,EAEM,EAA8B,CAClC,CACE,MAAO,2BACP,UAAW,YACX,IAAK,YACL,MAAO,GACT,EACA,CACE,MAAO,qBACP,UAAW,WACX,IAAK,WACL,MAAO,GACT,EACA,CACE,MAAO,eACP,UAAW,WACX,IAAK,WACL,MAAO,GACT,EACA,CACE,MAAO,eACP,UAAW,QACX,IAAK,QACL,MAAO,GACT,EACA,CACE,MAAO,qBACP,UAAW,QACX,IAAK,QACL,MAAO,GACT,EACA,CACE,MAAO,2BACP,UAAW,YACX,IAAK,YACL,MAAO,GACT,EACA,CACE,MAAO,eACP,UAAW,SACX,IAAK,SACL,MAAO,GACP,UAAW,CACT,EAAG,CAAE,KAAM,eAAM,OAAQ,SAAU,EACnC,EAAG,CAAE,KAAM,eAAM,OAAQ,OAAQ,CACnC,CACF,EACA,CACE,MAAO,eACP,IAAK,SACL,MAAO,IACP,MAAO,QACP,OAAQ,CAAC,EAAG,IAAW,CACrB,UAAC,SAAM,EAEL,KAAK,OACL,KAAK,QACL,QAAS,KACP,EAAiB,GACjB,EAAsB,CAAA,GACxB,WACD,gBAPK,QAUN,UAAC,SAAM,EAEL,KAAK,OACL,KAAK,QACL,MAAM,IACN,QAAS,IAAM,EAAa,YAC7B,gBALK,UAQP,AACH,EACD,CAED,MACE,WAAC,eAAa,YACZ,UAAC,UAAQ,EACP,YAAY,2BACZ,UAAW,EACX,OAAO,YACP,OAAQ,CACN,WAAY,MACd,EACA,cAAe,IAAM,CACnB,WAAC,SAAM,EACL,KAAK,UAEL,QAAS,KACP,EAAsB,CAAA,GACxB,YAEA,UAAC,SAAY,KAAG,kBALZ,WAOP,CACD,QAAS,MAAO,IACd,IAAM,EAAM,MAAM,EAAY,CAC5B,KAAM,EAAO,OAAO,EAAI,EACxB,UAAW,EAAO,QAAQ,EAAI,EAChC,UACA,AAAI,AAAa,MAAb,EAAI,IAAI,EAAY,EAAI,IAAI,CACvB,CACL,KAAM,EAAI,IAAI,CAAC,KAAK,CACpB,QAAS,CAAA,EACT,MAAO,EAAI,IAAI,CAAC,KAAK,AACvB,EAEK,CACL,KAAM,EAAE,CACR,QAAS,CAAA,EACT,MAAO,CACT,EACF,EACA,QAAS,IAGX,UAAC,GACC,QAAS,EACT,SAAU,IAAM,EAAsB,CAAA,GACtC,SAAU,EACV,MAAM,6BAGP,GACC,UAAC,GACC,QAAS,EACT,SAAU,KACR,EAAsB,CAAA,GACtB,EAAiB,MACnB,EACA,SAAU,EACV,MAAM,2BACN,cAAe,OAKzB"}